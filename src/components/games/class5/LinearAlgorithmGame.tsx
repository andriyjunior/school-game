import { useEffect, useState } from 'react';
import {
  GameProps,
  GameLayout,
  DragDropSequence,
  FeedbackSection,
  useGameState,
  useChallengeManager,
  QuestionDisplay
} from '../../../engine';

interface LinearAlgorithmTask {
  question: string;
  description: string;
  steps: string[];
  explanation: string;
  category: 'daily' | 'math' | 'computer' | 'school';
}

const LINEAR_ALGORITHM_LIBRARY: LinearAlgorithmTask[] = [
  // Daily life algorithms
  {
    question: "üåÖ –†–∞–Ω–∫–æ–≤—ñ –∑–±–æ—Ä–∏ –¥–æ —à–∫–æ–ª–∏",
    description: "–ü–æ–±—É–¥—É–π –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–Ω–∫–æ–≤–∏—Ö –∑–±–æ—Ä—ñ–≤",
    steps: [
      "–ü—Ä–æ–∫–∏–Ω—É—Ç–∏—Å—è –≤—ñ–¥ –±—É–¥–∏–ª—å–Ω–∏–∫–∞",
      "–£–º–∏—Ç–∏—Å—è —Ç–∞ –ø–æ—á–∏—Å—Ç–∏—Ç–∏ –∑—É–±–∏",
      "–û–¥—è–≥–Ω—É—Ç–∏—Å—è –≤ —à–∫—ñ–ª—å–Ω—É —Ñ–æ—Ä–º—É",
      "–ü–æ—Å–Ω—ñ–¥–∞—Ç–∏",
      "–ó—ñ–±—Ä–∞—Ç–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—å",
      "–í–∏–π—Ç–∏ –∑ –¥–æ–º—É"
    ],
    explanation: "–¶–µ –∫–ª–∞—Å–∏—á–Ω–∏–π –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º - –∫–æ–∂–µ–Ω –∫—Ä–æ–∫ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ, –æ–¥–∏–Ω –∑–∞ –æ–¥–Ω–∏–º. –Ø–∫—â–æ –ø–æ—Ä—É—à–∏—Ç–∏ –ø–æ—Ä—è–¥–æ–∫, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–º!",
    category: 'daily'
  },
  {
    question: "‚òï –ü—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è —á–∞—é",
    description: "–°—Ç–≤–æ—Ä–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è —á–∞—é",
    steps: [
      "–ù–∞–ª–∏—Ç–∏ –≤–æ–¥—É –≤ —á–∞–π–Ω–∏–∫",
      "–ü–æ—Å—Ç–∞–≤–∏—Ç–∏ —á–∞–π–Ω–∏–∫ –Ω–∞ –≤–æ–≥–æ–Ω—å",
      "–ü–æ—á–µ–∫–∞—Ç–∏ –ø–æ–∫–∏ –∑–∞–∫–∏–ø–∏—Ç—å",
      "–ü–æ–∫–ª–∞—Å—Ç–∏ –ø–∞–∫–µ—Ç–∏–∫ –≤ —á–∞—à–∫—É",
      "–ù–∞–ª–∏—Ç–∏ –æ–∫—Ä—ñ–ø –≤ —á–∞—à–∫—É",
      "–ó–∞—á–µ–∫–∞—Ç–∏ 2-3 —Ö–≤–∏–ª–∏–Ω–∏"
    ],
    explanation: "–õ—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–≥–æ—Ç—É–≤–∞–Ω–Ω—è —á–∞—é - –∫—Ä–æ–∫–∏ –π–¥—É—Ç—å —Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É. –ù–µ –º–æ–∂–Ω–∞ –Ω–∞–ª–∏—Ç–∏ –æ–∫—Ä—ñ–ø –¥–æ —Ç–æ–≥–æ, —è–∫ –∑–∞–∫–∏–ø'—è—Ç–∏—à –≤–æ–¥—É!",
    category: 'daily'
  },
  {
    question: "üìö –í–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–æ–º–∞—à–Ω—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è",
    description: "–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –¥–æ–º–∞—à–Ω—å–æ—ó —Ä–æ–±–æ—Ç–∏",
    steps: [
      "–î—ñ—Å—Ç–∞—Ç–∏ –∑–æ—à–∏—Ç —ñ –ø—ñ–¥—Ä—É—á–Ω–∏–∫",
      "–í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É",
      "–ü—Ä–æ—á–∏—Ç–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è",
      "–í–∏–∫–æ–Ω–∞—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è –≤ –∑–æ—à–∏—Ç—ñ",
      "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω—É —Ä–æ–±–æ—Ç—É",
      "–ü–æ–∫–ª–∞—Å—Ç–∏ –∑–æ—à–∏—Ç –≤ –ø–æ—Ä—Ç—Ñ–µ–ª—å"
    ],
    explanation: "–û—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ –¥–æ–º–∞—à–Ω—å–æ—ó —Ä–æ–±–æ—Ç–∏ - —Ü–µ —Ç–µ–∂ –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º. –ö–æ–∂–µ–Ω –∫—Ä–æ–∫ –≤–∞–∂–ª–∏–≤–∏–π —ñ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø–æ —á–µ—Ä–∑—ñ.",
    category: 'school'
  },
  {
    question: "üå± –ü–æ—Å–∞–¥–∫–∞ –∫–≤—ñ—Ç–∫–∏ –≤ –≥–æ—Ä—â–∏–∫",
    description: "–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Å–∞–¥–∫–∏ —Ä–æ—Å–ª–∏–Ω–∏",
    steps: [
      "–í–∑—è—Ç–∏ –≥–æ—Ä—â–∏–∫ —ñ –∑–µ–º–ª—é",
      "–ù–∞—Å–∏–ø–∞—Ç–∏ –∑–µ–º–ª—é –≤ –≥–æ—Ä—â–∏–∫",
      "–ó—Ä–æ–±–∏—Ç–∏ —è–º–∫—É –≤ –∑–µ–º–ª—ñ",
      "–ü–æ—Å—Ç–∞–≤–∏—Ç–∏ –Ω–∞—Å—ñ–Ω–Ω—è –≤ —è–º–∫—É",
      "–ü—Ä–∏—Å–∏–ø–∞—Ç–∏ –∑–µ–º–ª–µ—é",
      "–ü–æ–ª–∏—Ç–∏ –≤–æ–¥–æ—é"
    ],
    explanation: "–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –¥—ñ–π –ø—Ä–∏ –ø–æ—Å–∞–¥—Ü—ñ —Ä–æ—Å–ª–∏–Ω–∏ - —á—É–¥–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥ –ª—ñ–Ω—ñ–π–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –∑ –ø—Ä–∏—Ä–æ–¥–∏!",
    category: 'daily'
  },

  // Math algorithms
  {
    question: "‚ûï –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥–≤–æ—Ö —á–∏—Å–µ–ª",
    description: "–ê–ª–≥–æ—Ä–∏—Ç–º –¥–æ–¥–∞–≤–∞–Ω–Ω—è —á–∏—Å–µ–ª —Å—Ç–æ–≤–ø—á–∏–∫–æ–º",
    steps: [
      "–ó–∞–ø–∏—Å–∞—Ç–∏ —á–∏—Å–ª–∞ –æ–¥–Ω–µ –ø—ñ–¥ –æ–¥–Ω–∏–º",
      "–í–∏—Ä—ñ–≤–Ω—è—Ç–∏ –ø–æ —Ä–æ–∑—Ä—è–¥–∞—Ö",
      "–î–æ–¥–∞—Ç–∏ –æ–¥–∏–Ω–∏—Ü—ñ",
      "–î–æ–¥–∞—Ç–∏ –¥–µ—Å—è—Ç–∫–∏",
      "–î–æ–¥–∞—Ç–∏ —Å–æ—Ç–Ω—ñ",
      "–ó–∞–ø–∏—Å–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å"
    ],
    explanation: "–î–æ–¥–∞–≤–∞–Ω–Ω—è —Å—Ç–æ–≤–ø—á–∏–∫–æ–º - —Ü–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∏–π –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º. –í–∏–∫–æ–Ω—É—î–º–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ –≤—ñ–¥ –æ–¥–∏–Ω–∏—Ü—å –¥–æ –Ω–∞–π—Å—Ç–∞—Ä—à–∏—Ö —Ä–æ–∑—Ä—è–¥—ñ–≤.",
    category: 'math'
  },
  {
    question: "üìè –í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è –¥–æ–≤–∂–∏–Ω–∏ –ª—ñ–Ω—ñ–π–∫–æ—é",
    description: "–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–∏–º—ñ—Ä—è—Ç–∏ –≤—ñ–¥—Ä—ñ–∑–æ–∫",
    steps: [
      "–í–∑—è—Ç–∏ –ª—ñ–Ω—ñ–π–∫—É",
      "–ü—Ä–∏–∫–ª–∞—Å—Ç–∏ –ø–æ—á–∞—Ç–æ–∫ –ª—ñ–Ω—ñ–π–∫–∏ –¥–æ –ø–æ—á–∞—Ç–∫—É –≤—ñ–¥—Ä—ñ–∑–∫–∞",
      "–¢—Ä–∏–º–∞—Ç–∏ –ª—ñ–Ω—ñ–π–∫—É —Ä—ñ–≤–Ω–æ",
      "–ó–Ω–∞–π—Ç–∏ –∫—ñ–Ω–µ—Ü—å –≤—ñ–¥—Ä—ñ–∑–∫–∞ –Ω–∞ –ª—ñ–Ω—ñ–π—Ü—ñ",
      "–ü—Ä–æ—á–∏—Ç–∞—Ç–∏ —á–∏—Å–ª–æ",
      "–ó–∞–ø–∏—Å–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç"
    ],
    explanation: "–í–∏–º—ñ—Ä—é–≤–∞–Ω–Ω—è - —Ü–µ —Ç–æ—á–Ω–∏–π –ª—ñ–Ω—ñ–π–Ω–∏–π –ø—Ä–æ—Ü–µ—Å, –¥–µ –∫–æ–∂–µ–Ω –∫—Ä–æ–∫ –≤–∞–∂–ª–∏–≤–∏–π –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.",
    category: 'math'
  },
  {
    question: "üî¢ –ú–Ω–æ–∂–µ–Ω–Ω—è —á–∏—Å–ª–∞ –Ω–∞ 10",
    description: "–®–≤–∏–¥–∫–∏–π —Å–ø–æ—Å—ñ–± –º–Ω–æ–∂–µ–Ω–Ω—è –Ω–∞ 10",
    steps: [
      "–í–∑—è—Ç–∏ —á–∏—Å–ª–æ",
      "–î–æ–ø–∏—Å–∞—Ç–∏ –¥–æ –Ω—å–æ–≥–æ –Ω—É–ª—å —Å–ø—Ä–∞–≤–∞",
      "–ó–∞–ø–∏—Å–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç"
    ],
    explanation: "–ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º! –©–æ–± –ø–æ–º–Ω–æ–∂–∏—Ç–∏ –Ω–∞ 10, –ø—Ä–æ—Å—Ç–æ –¥–æ–ø–∏—Å—É—î–º–æ –Ω—É–ª—å.",
    category: 'math'
  },
  {
    question: "üìê –ü–æ–±—É–¥–æ–≤–∞ –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞",
    description: "–ö—Ä–µ—Å–ª–µ–Ω–Ω—è –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ª—ñ–Ω—ñ–π–∫–∏",
    steps: [
      "–ù–∞–∫—Ä–µ—Å–ª–∏—Ç–∏ –ø–µ—Ä—à–∏–π –±—ñ–∫",
      "–ü—ñ–¥ –ø—Ä—è–º–∏–º –∫—É—Ç–æ–º –Ω–∞–∫—Ä–µ—Å–ª–∏—Ç–∏ –¥—Ä—É–≥–∏–π –±—ñ–∫",
      "–ù–∞–∫—Ä–µ—Å–ª–∏—Ç–∏ —Ç—Ä–µ—Ç—ñ–π –±—ñ–∫ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –ø–µ—Ä—à–æ–º—É",
      "–ó'—î–¥–Ω–∞—Ç–∏ —á–µ—Ç–≤–µ—Ä—Ç–∏–º –±–æ–∫–æ–º",
      "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫—É—Ç–∏"
    ],
    explanation: "–ì–µ–æ–º–µ—Ç—Ä–∏—á–Ω–µ –∫—Ä–µ—Å–ª–µ–Ω–Ω—è - —Ç–µ–∂ –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –∑ —á—ñ—Ç–∫–æ—é –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—é –∫—Ä–æ–∫—ñ–≤.",
    category: 'math'
  },

  // Computer algorithms
  {
    question: "üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É –Ω–∞ –∫–æ–º–ø'—é—Ç–µ—Ä—ñ",
    description: "–ê–ª–≥–æ—Ä–∏—Ç–º –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—É",
    steps: [
      "–ù–∞—Ç–∏—Å–Ω—É—Ç–∏ '–§–∞–π–ª' –≤ –º–µ–Ω—é",
      "–í–∏–±—Ä–∞—Ç–∏ '–ó–±–µ—Ä–µ–≥—Ç–∏ —è–∫'",
      "–í–∏–±—Ä–∞—Ç–∏ –ø–∞–ø–∫—É –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è",
      "–í–≤–µ—Å—Ç–∏ –Ω–∞–∑–≤—É —Ñ–∞–π–ª—É",
      "–ù–∞—Ç–∏—Å–Ω—É—Ç–∏ '–ó–±–µ—Ä–µ–≥—Ç–∏'",
      "–î–æ—á–µ–∫–∞—Ç–∏—Å—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è"
    ],
    explanation: "–†–æ–±–æ—Ç–∞ –∑ –∫–æ–º–ø'—é—Ç–µ—Ä–æ–º —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –ª—ñ–Ω—ñ–π–Ω–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤ - –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏—Ö –¥—ñ–π –¥–ª—è –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è –º–µ—Ç–∏.",
    category: 'computer'
  },
  {
    question: "üñ®Ô∏è –î—Ä—É–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞",
    description: "–Ø–∫ –Ω–∞–¥—Ä—É–∫—É–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –¥–æ–∫—É–º–µ–Ω—Ç",
    steps: [
      "–í—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç",
      "–ù–∞—Ç–∏—Å–Ω—É—Ç–∏ '–§–∞–π–ª' ‚Üí '–î—Ä—É–∫'",
      "–í–∏–±—Ä–∞—Ç–∏ –ø—Ä–∏–Ω—Ç–µ—Ä",
      "–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–ø—ñ–π",
      "–ù–∞—Ç–∏—Å–Ω—É—Ç–∏ '–î—Ä—É–∫—É–≤–∞—Ç–∏'",
      "–ó–∞–±—Ä–∞—Ç–∏ —Ä–æ–∑–¥—Ä—É–∫—ñ–≤–∫—É"
    ],
    explanation: "–î—Ä—É–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞ - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–±–æ—Ç–∏ –∑ –æ—Ñ—ñ—Å–Ω–æ—é —Ç–µ—Ö–Ω—ñ–∫–æ—é.",
    category: 'computer'
  },
  {
    question: "üîç –ü–æ—à—É–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—ñ",
    description: "–ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ—à—É–∫—É",
    steps: [
      "–í—ñ–¥–∫—Ä–∏—Ç–∏ –±—Ä–∞—É–∑–µ—Ä",
      "–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø–æ—à—É–∫–æ–≤—É —Å–∏—Å—Ç–µ–º—É",
      "–í–≤–µ—Å—Ç–∏ –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞",
      "–ù–∞—Ç–∏—Å–Ω—É—Ç–∏ '–ü–æ—à—É–∫'",
      "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏",
      "–í–∏–±—Ä–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É"
    ],
    explanation: "–ü–æ—à—É–∫ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó - –±–∞–∑–æ–≤–∏–π –Ω–∞–≤–∏–∫ —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–º–ø'—é—Ç–µ—Ä–æ–º, —è–∫–∏–π —Ç–µ–∂ —î –ª—ñ–Ω—ñ–π–Ω–∏–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º.",
    category: 'computer'
  },
  {
    question: "üìß –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –ª–∏—Å—Ç–∞",
    description: "–ê–ª–≥–æ—Ä–∏—Ç–º –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ email",
    steps: [
      "–í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ—à—Ç–æ–≤—É –ø—Ä–æ–≥—Ä–∞–º—É",
      "–ù–∞—Ç–∏—Å–Ω—É—Ç–∏ '–ù–∞–ø–∏—Å–∞—Ç–∏ –ª–∏—Å—Ç'",
      "–í–≤–µ—Å—Ç–∏ –∞–¥—Ä–µ—Å—É –æ—Ç—Ä–∏–º—É–≤–∞—á–∞",
      "–ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ–º—É –ª–∏—Å—Ç–∞",
      "–ù–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è",
      "–ù–∞—Ç–∏—Å–Ω—É—Ç–∏ '–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏'"
    ],
    explanation: "–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞ - –≤–∞–∂–ª–∏–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Å–ø—ñ–ª–∫—É–≤–∞–Ω–Ω—è. –¶–µ–π –ø—Ä–æ—Ü–µ—Å —Ç–µ–∂ —î –ª—ñ–Ω—ñ–π–Ω–∏–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º.",
    category: 'computer'
  },

  // School algorithms
  {
    question: "üß™ –ü—Ä–æ–≤–µ–¥–µ–Ω–Ω—è –¥–æ—Å–ª—ñ–¥—É –∑ –≤–æ–¥–æ—é",
    description: "–ù–∞—É–∫–æ–≤–∏–π –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç: —á–∏ —Ç–æ–Ω–µ –¥–µ—Ä–µ–≤–æ?",
    steps: [
      "–ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —Å–∫–ª—è–Ω–∫—É –∑ –≤–æ–¥–æ—é",
      "–í–∑—è—Ç–∏ –¥–µ—Ä–µ–≤'—è–Ω–∏–π –ø—Ä–µ–¥–º–µ—Ç",
      "–û–±–µ—Ä–µ–∂–Ω–æ –æ–ø—É—Å—Ç–∏—Ç–∏ –≤ –≤–æ–¥—É",
      "–°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è",
      "–ó–∞–ø–∏—Å–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
      "–ó—Ä–æ–±–∏—Ç–∏ –≤–∏—Å–Ω–æ–≤–æ–∫"
    ],
    explanation: "–ù–∞—É–∫–æ–≤—ñ –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏ –∑–∞–≤–∂–¥–∏ –ø—Ä–æ–≤–æ–¥—è—Ç—å—Å—è –∑–∞ –ª—ñ–Ω—ñ–π–Ω–∏–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º - —Ü–µ –≥–∞—Ä–∞–Ω—Ç—É—î —Ç–æ—á–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤!",
    category: 'school'
  },
  {
    question: "üé® –ú–∞–ª—é–≤–∞–Ω–Ω—è –æ–ª—ñ–≤—Ü—è–º–∏",
    description: "–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –º–∞–ª—é–≤–∞–Ω–Ω—è",
    steps: [
      "–í–∑—è—Ç–∏ –ø–∞–ø—ñ—Ä —ñ –æ–ª—ñ–≤—Ü—ñ",
      "–ù–∞–∫—Ä–µ—Å–ª–∏—Ç–∏ –∫–æ–Ω—Ç—É—Ä –º–∞–ª—é–Ω–∫–∞",
      "–í–∏–±—Ä–∞—Ç–∏ –∫–æ–ª—å–æ—Ä–∏",
      "–†–æ–∑—Ñ–∞—Ä–±—É–≤–∞—Ç–∏ –≤–µ–ª–∏–∫—ñ —á–∞—Å—Ç–∏–Ω–∏",
      "–î–æ–¥–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ",
      "–ü—ñ–¥–ø–∏—Å–∞—Ç–∏ —Ä–æ–±–æ—Ç—É"
    ],
    explanation: "–¢–≤–æ—Ä—á–∏–π –ø—Ä–æ—Ü–µ—Å —Ç–µ–∂ –º–æ–∂–µ –±—É—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º! –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∫—Ä–æ–∫—ñ–≤ –¥–æ–ø–æ–º–∞–≥–∞—î —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≥–∞—Ä–Ω–∏–π –º–∞–ª—é–Ω–æ–∫.",
    category: 'school'
  },
  {
    question: "üìñ –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —É—Ä–æ–∫—É —á–∏—Ç–∞–Ω–Ω—è",
    description: "–Ø–∫ –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ —á–∏—Ç–∞–Ω–Ω—è –≤–≥–æ–ª–æ—Å",
    steps: [
      "–ü—Ä–æ—á–∏—Ç–∞—Ç–∏ —Ç–µ–∫—Å—Ç –ø—Ä–æ —Å–µ–±–µ",
      "–í–∏–ø–∏—Å–∞—Ç–∏ –Ω–µ–∑–Ω–∞–π–æ–º—ñ —Å–ª–æ–≤–∞",
      "–ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –∑–Ω–∞—á–µ–Ω–Ω—è —Å–ª—ñ–≤",
      "–ü—Ä–æ—á–∏—Ç–∞—Ç–∏ —Ç–µ–∫—Å—Ç —â–µ —Ä–∞–∑",
      "–ü–æ—Ç—Ä–µ–Ω—É–≤–∞—Ç–∏—Å—è —á–∏—Ç–∞—Ç–∏ –≤–≥–æ–ª–æ—Å",
      "–ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è"
    ],
    explanation: "–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —É—Ä–æ–∫—É - —Ü–µ —Ç–µ–∂ –∞–ª–≥–æ—Ä–∏—Ç–º! –°–ª—ñ–¥—É–≤–∞–Ω–Ω—è –π–æ–º—É –¥–æ–ø–æ–º–æ–∂–µ –∫—Ä–∞—â–µ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –º–∞—Ç–µ—Ä—ñ–∞–ª.",
    category: 'school'
  },
  {
    question: "‚öΩ –ü—Ä–∞–≤–∏–ª–∞ –≤—Ö–æ–¥—É –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª",
    description: "–ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –¥—ñ–π –ø–µ—Ä–µ–¥ —É—Ä–æ–∫–æ–º —Ñ—ñ–∑–∫—É–ª—å—Ç—É—Ä–∏",
    steps: [
      "–ü—Ä–∏–π—Ç–∏ –≤ —Ä–æ–∑–¥—è–≥–∞–ª—å–Ω—é",
      "–ü–µ—Ä–µ–æ–¥—è–≥—Ç–∏—Å—è –≤ —Å–ø–æ—Ä—Ç–∏–≤–Ω—É —Ñ–æ—Ä–º—É",
      "–í–∑—è—Ç–∏ —Å–ø–æ—Ä—Ç–∏–≤–Ω–µ –≤–∑—É—Ç—Ç—è",
      "–ó–∞—á–µ–∫–∞—Ç–∏ –Ω–∞ –≤—á–∏—Ç–µ–ª—è",
      "–ó–∞–π—Ç–∏ –≤ —Å–ø–æ—Ä—Ç–∑–∞–ª",
      "–°—Ç–∞—Ç–∏ –≤ —à–µ—Ä–µ–Ω–≥—É"
    ],
    explanation: "–ù–∞–≤—ñ—Ç—å –ø–æ–≤—Å—è–∫–¥–µ–Ω–Ω—ñ –¥—ñ—ó –≤ —à–∫–æ–ª—ñ - —Ü–µ –ª—ñ–Ω—ñ–π–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏, —è–∫—ñ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø–æ—Ä—è–¥–æ–∫.",
    category: 'school'
  },

  // Additional everyday algorithms
  {
    question: "üö™ –ü–µ—Ä–µ–¥ –≤–∏—Ö–æ–¥–æ–º –∑ –∫–ª–∞—Å—É",
    description: "–©–æ —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏ –ø—ñ—Å–ª—è —É—Ä–æ–∫—É",
    steps: [
      "–ó–∞–ø–∏—Å–∞—Ç–∏ –¥–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è",
      "–°–∫–ª–∞—Å—Ç–∏ —Ä–µ—á—ñ –≤ –ø–æ—Ä—Ç—Ñ–µ–ª—å",
      "–ü–æ—Å—Ç–∞–≤–∏—Ç–∏ —Å—Ç—ñ–ª–µ—Ü—å –Ω–∞ –ø–∞—Ä—Ç—É",
      "–í–∏–º–∫–Ω—É—Ç–∏ —Å–≤—ñ—Ç–ª–æ (—è–∫—â–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π)",
      "–ü–æ–ø—Ä–æ—â–∞—Ç–∏—Å—è –∑ –≤—á–∏—Ç–µ–ª–µ–º",
      "–í–∏–π—Ç–∏ –≤ –∫–æ—Ä–∏–¥–æ—Ä"
    ],
    explanation: "–û—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω—ñ—Å—Ç—å –≤ —à–∫–æ–ª—ñ - —Ü–µ –Ω–∞–±—ñ—Ä –∫–æ—Ä–∏—Å–Ω–∏—Ö –ª—ñ–Ω—ñ–π–Ω–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º—ñ–≤!",
    category: 'school'
  },
  {
    question: "üçé –ú–∏—Ç—Ç—è —Ñ—Ä—É–∫—Ç—ñ–≤",
    description: "–ì—ñ–≥—ñ—î–Ω—ñ—á–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∏ —Ñ—Ä—É–∫—Ç—ñ–≤",
    steps: [
      "–í–∑—è—Ç–∏ —Ñ—Ä—É–∫—Ç",
      "–í—ñ–¥–∫—Ä–∏—Ç–∏ –∫—Ä–∞–Ω –∑ –≤–æ–¥–æ—é",
      "–ü–æ–º–∏—Ç–∏ —Ñ—Ä—É–∫—Ç –ø—ñ–¥ –ø—Ä–æ—Ç–æ—á–Ω–æ—é –≤–æ–¥–æ—é",
      "–í–∏—Ç–µ—Ä—Ç–∏ –Ω–∞—Å—É—Ö–æ",
      "–ó–∞–∫—Ä–∏—Ç–∏ –∫—Ä–∞–Ω",
      "–ú–æ–∂–Ω–∞ —ó—Å—Ç–∏"
    ],
    explanation: "–ì—ñ–≥—ñ—î–Ω–∞ - —Ü–µ –≤–∞–∂–ª–∏–≤–æ! –Ü —Ü–µ —Ç–µ–∂ –ª—ñ–Ω—ñ–π–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –Ω–∞—à–æ–≥–æ –∑–¥–æ—Ä–æ–≤'—è.",
    category: 'daily'
  },
  {
    question: "üì± –ó–∞—Ä—è–¥–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É",
    description: "–ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –∑–∞—Ä—è–¥–∫–∏ –ø—Ä–∏—Å—Ç—Ä–æ—é",
    steps: [
      "–í–∑—è—Ç–∏ –∑–∞—Ä—è–¥–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π",
      "–í—Å—Ç–∞–≤–∏—Ç–∏ –≤ —Ä–æ–∑–µ—Ç–∫—É",
      "–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫–∞–±–µ–ª—å –¥–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É",
      "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –∑–∞—Ä—è–¥–∫–∞ –ø–æ—á–∞–ª–∞—Å—è",
      "–ü–æ—á–µ–∫–∞—Ç–∏ –¥–æ –ø–æ–≤–Ω–æ—ó –∑–∞—Ä—è–¥–∫–∏",
      "–í—ñ–¥'—î–¥–Ω–∞—Ç–∏ –≤—ñ–¥ —Ä–æ–∑–µ—Ç–∫–∏"
    ],
    explanation: "–ë–µ–∑–ø–µ—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ –µ–ª–µ–∫—Ç—Ä–∏–∫–æ—é - —Ü–µ —Ç–∞–∫–æ–∂ –¥–æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ª—ñ–Ω—ñ–π–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É!",
    category: 'computer'
  }
];

const CATEGORY_GRADIENTS = {
  daily: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
  math: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
  computer: 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
  school: 'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)'
};

const CATEGORY_NAMES = {
  daily: '–ü–æ–≤—Å—è–∫–¥–µ–Ω–Ω–µ –∂–∏—Ç—Ç—è',
  math: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞',
  computer: '–ö–æ–º–ø\'—é—Ç–µ—Ä',
  school: '–®–∫–æ–ª–∞'
};

export default function LinearAlgorithmGame({ onBack, onShowHelp, updateScore }: GameProps) {
  const [availableSteps, setAvailableSteps] = useState<string[]>([]);
  const [userOrder, setUserOrder] = useState<string[]>([]);

  const {
    currentChallenge,
    loadNextChallenge
  } = useChallengeManager<LinearAlgorithmTask>({
    challenges: LINEAR_ALGORITHM_LIBRARY,
    avoidRepeatLast: 6
  });

  const {
    showFeedback,
    isCorrect,
    score,
    streak,
    tasksCompleted,
    showCelebration,
    handleCorrectAnswer,
    handleIncorrectAnswer,
    resetForNewTask
  } = useGameState(updateScore, {
    basePoints: 150,
    streakMultiplier: 15,
    gameType: 'linear-algorithm'
  });

  useEffect(() => {
    loadNextChallenge();
  }, [loadNextChallenge]);

  useEffect(() => {
    if (currentChallenge) {
      // Shuffle available steps
      const shuffled = [...currentChallenge.steps].sort(() => Math.random() - 0.5);
      setAvailableSteps(shuffled);
      setUserOrder([]);
    }
  }, [currentChallenge]);

  const handleItemMove = (fromIndex: number, toIndex: number, fromZone: 'available' | 'ordered') => {
    if (showFeedback) return;

    if (fromZone === 'available') {
      // Moving from available to ordered
      const item = availableSteps[fromIndex];
      const newAvailable = availableSteps.filter((_, i) => i !== fromIndex);
      const newOrdered = [...userOrder];
      newOrdered.splice(toIndex, 0, item);

      setAvailableSteps(newAvailable);
      setUserOrder(newOrdered);

      // Auto-check when all steps are placed
      if (newOrdered.length === currentChallenge!.steps.length) {
        setTimeout(() => checkAnswer(newOrdered), 300);
      }
    } else {
      // Reordering within ordered zone (swap)
      const newOrdered = [...userOrder];
      const [movedItem] = newOrdered.splice(fromIndex, 1);
      newOrdered.splice(toIndex, 0, movedItem);
      setUserOrder(newOrdered);
    }
  };

  const handleItemRemove = (index: number) => {
    if (showFeedback) return;

    const removedItem = userOrder[index];
    setUserOrder(userOrder.filter((_, i) => i !== index));
    setAvailableSteps([...availableSteps, removedItem]);
  };

  const checkAnswer = async (order: string[]) => {
    if (!currentChallenge) return;

    const correct = order.every((step, index) => step === currentChallenge.steps[index]);

    if (correct) {
      await handleCorrectAnswer();
    } else {
      handleIncorrectAnswer();
    }
  };

  const handleNext = () => {
    loadNextChallenge();
    resetForNewTask();
  };

  if (!currentChallenge) {
    return <div>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>;
  }

  const gradient = CATEGORY_GRADIENTS[currentChallenge.category];
  const categoryName = CATEGORY_NAMES[currentChallenge.category];

  return (
    <GameLayout
      gameType="linear-algorithm"
      onBack={onBack}
      onShowHelp={onShowHelp}
      score={score}
      streak={streak}
      tasksCompleted={tasksCompleted}
      showCelebration={showCelebration}
      gradient={gradient}
      extraStats={[{ label: '–ö–∞—Ç–µ–≥–æ—Ä—ñ—è', value: `üìÇ ${categoryName}` }]}
    >
      <QuestionDisplay
        question={currentChallenge.question}
        subtitle={currentChallenge.description}
        color="#667eea"
      />

      {!showFeedback && (
        <div style={{ marginTop: '20px' }}>
          <DragDropSequence
            availableItems={availableSteps}
            orderedItems={userOrder}
            onItemMove={handleItemMove}
            onItemRemove={handleItemRemove}
            disabled={showFeedback}
            maxItems={currentChallenge.steps.length}
            gradient={gradient}
            showFeedback={showFeedback}
            isCorrect={isCorrect}
            emptyMessage="–ü–µ—Ä–µ—Ç—è–≥–Ω–∏ –∫—Ä–æ–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—É —Å—é–¥–∏ ‚¨ÜÔ∏è"
            promptMessage="üéØ –ö—Ä–æ–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—É (–ø–µ—Ä–µ—Ç—è–≥–Ω–∏ —ó—Ö –≤–≤–µ—Ä—Ö —É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É):"
          />
        </div>
      )}

      {showFeedback && (
        <FeedbackSection
          isCorrect={isCorrect!}
          points={150 + (streak - 1) * 15}
          streak={streak}
          explanation={currentChallenge.explanation}
          onNext={handleNext}
          nextButtonText="‚û°Ô∏è –ù–∞—Å—Ç—É–ø–Ω–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º"
        >
          {isCorrect && (
            <div style={{
              marginTop: '15px',
              padding: '15px',
              background: 'linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%)',
              borderRadius: '12px',
              border: '2px solid #00acc1'
            }}>
              <div style={{ fontSize: '1.1em', fontWeight: 'bold', color: '#006064', marginBottom: '10px' }}>
                ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å:
              </div>
              {currentChallenge.steps.map((step, index) => (
                <div key={index} style={{
                  padding: '8px 12px',
                  margin: '5px 0',
                  background: 'white',
                  borderRadius: '8px',
                  display: 'flex',
                  alignItems: 'center',
                  gap: '10px'
                }}>
                  <div style={{
                    width: '25px',
                    height: '25px',
                    background: '#00acc1',
                    color: 'white',
                    borderRadius: '50%',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    fontSize: '0.9em',
                    fontWeight: 'bold'
                  }}>
                    {index + 1}
                  </div>
                  <div style={{ color: '#006064' }}>{step}</div>
                </div>
              ))}
            </div>
          )}
        </FeedbackSection>
      )}
    </GameLayout>
  );
}
